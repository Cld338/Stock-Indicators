<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>경제 지표 대시보드</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 1em;
    background-color: #f8f9fa;
    color: #212529;
  }
  h1 {
    text-align: center;
    margin-bottom: 0.5em;
    color: #343a40;
  }
  section {
    margin-bottom: 2em;
  }
  h2 {
    margin: 1em 0 0.5em 0;
    color: #495057;
    font-size: 1.2em;
  }
  .grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 1em;
  }
  .card {
    background: #fff;
    padding: 0.5em;
    box-shadow: 0 0 5px rgba(0,0,0,0.1);
    border-radius: 4px;
  }
  .card-title {
    font-size: 0.95em;
    font-weight: bold;
    color: #212529;
    margin-bottom: 0.3em;
  }
  .iframe-container {
    position: relative;
    width: 100%;
    padding-top: 75%;
    overflow: hidden;
  }
  .iframe-container iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: none;
  }
</style>
</head>
<body>

<h1>경제 지표 대시보드</h1>

<section id="dashboard">
  <!-- 카드들이 들어갈 자리 -->
</section>

<script>
const indicators = [
  { category: '화폐', items: [
    { title: '달러 지수', code: '1KHPk' },
    { title: '비트코인 가격(BTC)', code: '1KI8I' },
    { title: '원·달러 환율', code: '1KHQ6' },
  ]},
  { category: '시장', items: [
    { title: 'GDP 대비 시장 시가 총액', code: '1KI90' },
    { title: 'VIX 지수', code: '1KI9r' },
  ]},
  { category: '개인·소비자·가계', items: [
    { title: '소비자 심리 지수(CCPI)', code: '1KySD' },
    { title: '소비자 물가 상승률(CPI)', code: '1KyTx' },
    { title: '가처분 소득 대비 가계 부채', code: '1KI8p' },
    { title: '실업률', code: '1KIb2' },
    { title: 'GDP 대비 가계 부채', code: '1KI8A' },
  ]},
  { category: '원자재', items: [
    { title: '유가 지수(WTI)', code: '1KHW8' },
    { title: '금 현물 시세', code: '1KHVU' },
  ]},
];

function createDashboard() {
  const container = document.getElementById('dashboard');
  indicators.forEach(section => {
    const sec = document.createElement('section');
    const h2 = document.createElement('h2');
    h2.textContent = section.category;
    sec.appendChild(h2);

    const grid = document.createElement('div');
    grid.className = 'grid';

    section.items.forEach(item => {
      const card = document.createElement('div');
      card.className = 'card';

      const title = document.createElement('div');
      title.className = 'card-title';
      title.textContent = item.title;
      card.appendChild(title);

      const iframeContainer = document.createElement('div');
      iframeContainer.className = 'iframe-container';

      const iframe = document.createElement('iframe');
      iframe.dataset.code = item.code; // 저장해둔다
      iframeContainer.appendChild(iframe);

      card.appendChild(iframeContainer);
      grid.appendChild(card);
    });

    sec.appendChild(grid);
    container.appendChild(sec);
  });
  adjustIframes();
}

function adjustIframes() {
  const iframes = document.querySelectorAll('iframe');
  iframes.forEach(iframe => {
    const container = iframe.parentElement;
    const width = container.offsetWidth - 20;
    const height = Math.round(width * 0.75) - 40;
    const code = iframe.dataset.code;
    iframe.src = `https://fred.stlouisfed.org/graph/graph-landing.php?g=${code}&width=${width}&height=${height}`;
  });
}

window.addEventListener('resize', () => {
  adjustIframes();
});

createDashboard();
</script>

</body>
</html>
